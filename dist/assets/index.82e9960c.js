import{G as P,W as S,A as x,S as L,P as C,a as R,b as T,T as k,R as A,V as y,c as W,d as z,O as E,M as g}from"./vendor.9f94b0f3.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function d(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(t){if(t.ep)return;t.ep=!0;const i=d(t);fetch(t.href,i)}};G();let c,r,s,u,f,p;const v=new P;function m(o,e){return Math.random()*(e-o)+o}class O{constructor(){v.load("assets/boat/scene.gltf",e=>{r.add(e.scene),e.scene.scale.set(3,3,3),e.scene.position.set(5,13,50),e.scene.rotation.y=1.5,this.boat=e.scene,this.speed={vel:0,rot:0}})}stop(){this.speed.vel=0,this.speed.rot=0}update(){this.boat&&(this.boat.rotation.y+=this.speed.rot,this.boat.translateX(this.speed.vel))}}const a=new O;class D{constructor(e){r.add(e),e.scale.set(1.5,1.5,1.5),Math.random()>.6?e.position.set(m(-100,100),-.5,m(-100,100)):e.position.set(m(-500,500),-.5,m(-1e3,1e3)),this.trash=e}}async function H(o){return new Promise((e,d)=>{v.load(o,l=>{e(l.scene)})})}let h=null;async function F(){return h||(h=await H("assets/trash/scene.gltf")),new D(h.clone())}let b=[];const N=500;U();M();async function U(){s=new S,s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.toneMapping=x,document.body.appendChild(s.domElement),r=new L,c=new C(55,window.innerWidth/window.innerHeight,1,2e4),c.position.set(30,30,100),p=new y;const o=new R(1e4,1e4);f=new T(o,{textureWidth:512,textureHeight:512,waterNormals:new k().load("assets/waternormals.jpg",function(n){n.wrapS=n.wrapT=A}),sunDirection:new y,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:r.fog!==void 0}),f.rotation.x=-Math.PI/2,r.add(f);const e=new W;e.scale.setScalar(1e4),r.add(e);const d=e.material.uniforms;d.turbidity.value=10,d.rayleigh.value=2,d.mieCoefficient.value=.005,d.mieDirectionalG.value=.8;const l={elevation:2,azimuth:180},t=new z(s);function i(){const n=g.degToRad(90-l.elevation),w=g.degToRad(l.azimuth);p.setFromSphericalCoords(1,n,w),e.material.uniforms.sunPosition.value.copy(p),f.material.uniforms.sunDirection.value.copy(p).normalize(),r.environment=t.fromScene(e).texture}i(),u=new E(c,s.domElement),u.maxPolarAngle=Math.PI*.495,u.target.set(0,10,0),u.minDistance=40,u.maxDistance=200,u.update(),f.material.uniforms;for(let n=0;n<N;n++){const w=await F();b.push(w)}window.addEventListener("resize",I),window.addEventListener("keydown",function(n){n.key=="ArrowUp"&&(a.speed.vel=1),n.key=="ArrowDown"&&(a.speed.vel=-1),n.key=="ArrowRight"&&(a.speed.rot=-.1),n.key=="ArrowLeft"&&(a.speed.rot=.1)}),window.addEventListener("keyup",function(n){a.stop()})}function I(){c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function j(o,e){return Math.abs(o.position.x-e.position.x)<15&&Math.abs(o.position.z-e.position.z)<15}function q(){a.boat&&b.forEach(o=>{console.log("hello"),o.trash&&j(a.boat,o.trash)&&r.remove(o.trash)})}function M(){requestAnimationFrame(M),V(),a.update(),q()}function V(){f.material.uniforms.time.value+=1/60,s.render(r,c)}
